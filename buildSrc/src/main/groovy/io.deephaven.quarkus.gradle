import io.deephaven.project.util.JavaDependencies

plugins {
    id 'io.deephaven.common-conventions'
    id 'io.deephaven.machine-version'
    id 'io.deephaven.java-common-conventions'
    id 'io.deephaven.java-test-conventions'
    id 'io.deephaven.default-description'
}

dependencies {
    // Set all versions to "whatever quarkus is using for dependencies" (bom)
    String quarkusGroup = findProperty('quarkusPlatformGroupId')
    String quarkusArtifact = findProperty('quarkusPlatformArtifactId')
    String quarkusVersion = findProperty('quarkusPlatformVersion')
    implementation enforcedPlatform("${quarkusGroup}:${quarkusArtifact}:${quarkusVersion}")
    implementation enforcedPlatform("${quarkusGroup}:quarkus-google-cloud-services-bom:${quarkusVersion}")
}

tasks.withType(Test).configureEach {
    Test t ->
        t.systemProperty('dh-version', project.ext.machineVersion)
}